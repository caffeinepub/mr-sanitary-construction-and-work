{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Domain configuration via VITE_PUBLIC_SITE_URL (canonical + OG) and developer documentation",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Use VITE_PUBLIC_SITE_URL as the single build-time switch for canonical and og:url origin with safe normalization and runtime fallback.",
      "acceptanceCriteria": [
        "When `VITE_PUBLIC_SITE_URL` is set (e.g., `https://example.com`), the app sets the canonical URL and `og:url` using that origin (without trailing slash issues).",
        "When `VITE_PUBLIC_SITE_URL` is not set, canonical and `og:url` fall back to `window.location.origin`."
      ],
      "file_operations": [
        {
          "path": "frontend/index.html",
          "operation": "modify",
          "description": "Update the inline SEO script that sets canonical and `og:url` to (1) treat `VITE_PUBLIC_SITE_URL` as optional, (2) normalize it to a pure origin using URL parsing when present (ensuring no trailing slash/path/query issues), and (3) fall back to `window.location.origin` when unset or invalid, then append `window.location.pathname` to form canonical/og URLs."
        },
        {
          "path": "frontend/src/config/siteUrl.ts",
          "operation": "modify",
          "description": "Align/clarify the site URL utility behavior and comments so they match the canonical/OG URL rules: `VITE_PUBLIC_SITE_URL` is interpreted as the public origin at build time, normalized safely, and falls back to `window.location.origin` when missing/invalid."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Update DOMAIN_CONFIGURATION.md with explicit steps for setting VITE_PUBLIC_SITE_URL and verifying canonical/OG output.",
      "acceptanceCriteria": [
        "`frontend/DOMAIN_CONFIGURATION.md` contains actionable steps showing exactly how to set `VITE_PUBLIC_SITE_URL` for production builds and how to confirm the canonical/OG URLs in the page source or devtools."
      ],
      "file_operations": [
        {
          "path": "frontend/DOMAIN_CONFIGURATION.md",
          "operation": "modify",
          "description": "Complete the domain configuration guide with step-by-step instructions: where to set `VITE_PUBLIC_SITE_URL` (build-time env), accepted formats (full URL with protocol), trailing slash handling/normalization behavior, and a verification checklist (view page source/devtools Elements to confirm the generated canonical link and `og:url`)."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Add a checked-in example environment file documenting VITE_PUBLIC_SITE_URL format and purpose.",
      "acceptanceCriteria": [
        "A new example env file exists in the frontend repo (e.g., `.env.example`) that includes `VITE_PUBLIC_SITE_URL=https://your-domain.com` and a short comment describing what it controls."
      ],
      "file_operations": [
        {
          "path": "frontend/.env.example",
          "operation": "create",
          "description": "Create an example environment configuration file that includes `VITE_PUBLIC_SITE_URL=https://your-domain.com` plus a short comment explaining it controls the public origin used for canonical and `og:url` generation."
        }
      ]
    }
  ]
}