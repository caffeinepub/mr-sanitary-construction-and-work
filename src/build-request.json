{
  "kind": "build_request",
  "title": "Update and document site domain configuration",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Provide a clear, single process to change the deployed site domain by configuring `VITE_PUBLIC_SITE_URL` at build time, and ensure this is the only required change to affect canonical/OG URLs.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "recent-messages"
        ],
        "quotes": [
          "I want to change domin"
        ]
      },
      "acceptanceCriteria": [
        "When `VITE_PUBLIC_SITE_URL` is set (e.g., `https://example.com`), the app sets the canonical URL and `og:url` using that origin (without trailing slash issues).",
        "When `VITE_PUBLIC_SITE_URL` is not set, canonical and `og:url` fall back to `window.location.origin`."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Complete and/or update `frontend/DOMAIN_CONFIGURATION.md` to include explicit, step-by-step instructions for changing the domain (where to set `VITE_PUBLIC_SITE_URL`, accepted formats, trailing slash handling, and how to verify the change in the browser).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "recent-messages"
        ],
        "quotes": [
          "I want to change domin"
        ]
      },
      "acceptanceCriteria": [
        "`frontend/DOMAIN_CONFIGURATION.md` contains actionable steps showing exactly how to set `VITE_PUBLIC_SITE_URL` for production builds and how to confirm the canonical/OG URLs in the page source or devtools."
      ]
    },
    {
      "id": "REQ-3",
      "text": "Add an example environment configuration file for developers (e.g., a checked-in example file) that documents `VITE_PUBLIC_SITE_URL` and its expected value format.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "recent-messages"
        ],
        "quotes": [
          "I want to change domin"
        ]
      },
      "acceptanceCriteria": [
        "A new example env file exists in the frontend repo (e.g., `.env.example`) that includes `VITE_PUBLIC_SITE_URL=https://your-domain.com` and a short comment describing what it controls."
      ]
    },
    {
      "id": "REQ-4",
      "text": "Align backend deployment guidance comments in `backend/main.mo` with the frontend domain configuration approach so instructions are not contradictory (i.e., reference `VITE_PUBLIC_SITE_URL` and avoid placeholders like `<path-to-deployment-config>` / `<domain-entry>` unless they are real file paths/keys present in the repo).",
      "target": "backend",
      "source": {
        "messageIds": [
          "recent-messages"
        ],
        "quotes": [
          "I want to change domin"
        ]
      },
      "acceptanceCriteria": [
        "`backend/main.mo` contains accurate, concrete instructions that match how the frontend actually derives the public site origin (via `VITE_PUBLIC_SITE_URL`).",
        "No misleading placeholder deployment instructions remain unless the referenced config file/key exists in the repository."
      ]
    }
  ],
  "constraints": [
    "Do not edit files under `frontend/src/hooks/useInternetIdentity.ts`, `frontend/src/hooks/useInternetIdentity.tsx`, `frontend/src/hooks/useActor.ts`, `frontend/src/main.tsx`, or anything in `frontend/src/components/ui` (compose them instead).",
    "Backend must remain a single Motoko actor in `backend/main.mo`; add `backend/migration.mo` only if state schema changes are required (not expected for domain configuration)."
  ],
  "nonGoals": [
    "Purchasing/configuring a custom domain, DNS records, SSL certificates, or registrar settings.",
    "Adding new product features unrelated to domain/origin configuration."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}